# SeeOSC — Просмотр осциллограмм и расчёт АЧХ

Приложение для просмотра осциллограмм из файлов формата `.osc`, анализа спектра и расчёта амплитудно-частотной характеристики (АЧХ) пьезоакустоэлектрических преобразователей (ПАЭ).

---

## Запуск приложения

```bash
python main.py
```

Для запуска только просмотрщика осциллограмм (без расчёта АЧХ):
```bash
python seeOSC.py
```

**Требования:** Python 3.x, PyQt5, pyqtgraph, numpy, numba, scipy.

Перед первым запуском установите зависимости:
```bash
pip install PyQt5 pyqtgraph numpy numba scipy
```

---

## Основные операции

### 1. Открытие файла

- Нажмите кнопку **«открыть osc»**
- Выберите файл с расширением `.osc`
- После загрузки отобразятся осциллограмма, спектр и элементы управления

### 2. Просмотр осциллограмм

После открытия файла на экране отображаются:

- **Осциллограмма** — временной сигнал с указанием уровня в дБ
- **Спектр осциллограммы** — частотный спектр с доминирующей частотой (кГц)

**Переключение между осциллограммами:**
- Кнопки **«Предыдущая осциллограмма»** и **«Следующая осциллограмма»**
- Клавиши **←** и **→**
- Поле ввода **№ осциллограммы:** + кнопка **«Перейти»** (или Enter)

Внизу окна отображается: `Номер кадра: X из N`.

### 3. Координаты на графиках

При наведении курсора на график внизу отображаются координаты X и Y.

---

## Расчёт АЧХ

АЧХ рассчитывается **автоматически** при:
- открытии файла `.osc`;
- переключении на другую осциллограмму (стрелки, кнопки, поле номера).

На графике АЧХ отображается кривая для текущей осциллограммы. Оси: частота (кГц) и дБ отн. 1 В/(м/с).

### Сохранение графика АЧХ

После расчёта АЧХ активируется кнопка **«Сохранить АЧХ в PNG»**.  
Выберите место сохранения и имя файла — график будет экспортирован в PNG.

---

## Конфигурация АЧХ (ach_config.json)

Файл `ach_config.json` управляет параметрами расчёта АЧХ. При отсутствии используются значения по умолчанию.

**Расположение:** папка приложения (рядом с exe или main.py).

### Структура файла

```json
{
  "_comment": "Необязательное поле с описанием параметров",
  "refGT200": 92,
  "SGT200": 65,
  "unitADC": 3.05,
  "fD_kHz": 1000,
  "fft_size": 8192,
  "smooth_window": 50,
  "skip_bins": 300,
  "freq_range": [50, 500],
  "db_range": [10, 70]
}
```

### Описание параметров

| Параметр        | Тип         | Описание                                 | По умолчанию |
|-----------------|-------------|------------------------------------------|--------------|
| `refGT200`      | число       | Опорный уровень в дБ                     | 92           |
| `SGT200`        | число       | Чувствительность эталона, дБ             | 65           |
| `unitADC`       | число       | мкВ на единицу АЦП (по умолчанию)         | 3.05         |
| `fD_kHz`        | число       | Частота дискретизации, кГц               | 1000         |
| `fft_size`      | целое       | Размер окна FFT                           | 8192         |
| `smooth_window` | целое       | Окно сглаживания спектра (отсчёты)       | 50           |
| `skip_bins`     | целое       | Количество начальных отсчётов для исключения при поиске максимума | 300 |
| `freq_range`    | [мин, макс] | Диапазон частот по оси X графика, кГц     | [50, 500]    |
| `db_range`      | [мин, макс] | Диапазон уровня по оси Y графика, дБ      | [10, 70]     |

Можно указывать только нужные параметры — остальные возьмутся из значений по умолчанию.

---

## Горячие клавиши

| Клавиша | Действие                          |
|---------|-----------------------------------|
| ←       | Предыдущая осциллограмма         |
| →       | Следующая осциллограмма           |
| Enter   | Перейти к осциллограмме (в поле номера) |

---

## Лог

События работы приложения записываются в файл `log_seeOSC.txt` в папке приложения.
