# SeeOSC — Просмотр осциллограмм и расчёт АЧХ

Приложение для просмотра осциллограмм из файлов формата `.osc`, анализа спектра и расчёта амплитудно-частотной характеристики (АЧХ) пьезоакустоэлектрических преобразователей (ПАЭ).

---

## Запуск приложения

```bash
python main.py
```

Для запуска только просмотрщика осциллограмм (без расчёта АЧХ):
```bash
python seeOSC.py
```

**Требования:** Python 3.x, PyQt5, pyqtgraph, numpy, numba, scipy.

Перед первым запуском установите зависимости:
```bash
pip install PyQt5 pyqtgraph numpy numba scipy
```

---

## Основные операции

### 1. Открытие файла

- Нажмите кнопку **«открыть osc»**
- Выберите файл с расширением `.osc`
- После загрузки отобразятся осциллограмма, спектр и элементы управления

### 2. Просмотр осциллограмм

После открытия файла на экране отображаются:

- **Осциллограмма** — временной сигнал с указанием уровня в дБ
- **Спектр осциллограммы** — частотный спектр с доминирующей частотой (кГц)

**Переключение между осциллограммами:**
- Кнопки **«Предыдущая осциллограмма»** и **«Следующая осциллограмма»**
- Клавиши **←** и **→**
- Поле ввода **№ осциллограммы:** + кнопка **«Перейти»** (или Enter)

Внизу окна отображается: `Номер кадра: X из N`.

### 3. Координаты на графиках

При наведении курсора на график внизу отображаются координаты X и Y.

---

## Расчёт АЧХ

АЧХ рассчитывается **автоматически** при:
- открытии файла `.osc`;
- переключении на другую осциллограмму (стрелки, кнопки, поле номера).

На графике АЧХ отображается кривая для текущей осциллограммы. Оси: частота (кГц) и дБ отн. 1 В/(м/с).

### Сохранение графика АЧХ

После расчёта АЧХ активируется кнопка **«Сохранить АЧХ в PNG»**.  
Выберите место сохранения и имя файла — график будет экспортирован в PNG.

---

## Конфигурация АЧХ (ach_config.json)

Файл `ach_config.json` в папке приложения управляет параметрами расчёта АЧХ.  
При отсутствии файла используются значения по умолчанию.

| Параметр       | Описание                          | Пример |
|----------------|-----------------------------------|--------|
| `refGT200`     | Опорный уровень в дБ              | 92     |
| `SGT200`       | Чувствительность эталона          | 65     |
| `fD_kHz`       | Частота дискретизации, кГц       | 1000   |
| `fft_size`     | Размер FFT                        | 8192   |
| `smooth_window`| Окно сглаживания                  | 50     |
| `skip_bins`    | С какого отсчёта искать максимум  | 300    |
| `freq_range`   | Диапазон по оси X [мин, макс] кГц | [0, 500] |
| `db_range`     | Диапазон по оси Y [мин, макс] дБ  | [0, 70]  |

Файл также можно разместить в `%APPDATA%\oscAfc\ach_config.json` (Windows).

---

## Горячие клавиши

| Клавиша | Действие                          |
|---------|-----------------------------------|
| ←       | Предыдущая осциллограмма         |
| →       | Следующая осциллограмма           |
| Enter   | Перейти к осциллограмме (в поле номера) |

---

## Лог

События работы приложения записываются в файл `log_seeOSC.txt` в папке приложения.
